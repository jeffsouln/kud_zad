<!DOCTYPE html>
<html>
    <head>
        <title>Task five</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <link href="public/css/style.css" rel="stylesheet" type="text/css" media="screen" />
        <script src="public/js/jquery.js" type="text/javascript"></script>
    </head>
    <body>
        <div>
        	<h1>Web parser</h1>
        	<p>Parser is displaying text from some web page that is related to item You choose (CSS selector, attribute etc.) Insert URL and “item” which to parse from given address.</p>
        	<p> The result will be given in a table.</p>
        	<div id="form_wraper">
        		<form id="parser_form" action="parser.php" method="post">
        			<label>URL to parse: </label><br><input type="url" name="tb_url"><br>
        			<label>Item which to parse: </label><br><input type="text" name="tb_item"><br>
        			<input id="btn_parse" type="submit" value="PARSE" name="btn_parse">
        		</form>
        	</div>
        	<div id="result_wraper">
        	</div>
        </div>

    <script type="text/javascript">
    	$('#parser_form').submit(function(e){												//ajax salje podatke iz forme, post
    		var data = $(this).serializeArray();
            var URL = $(this).attr('action');
            $.ajax({
                    url : URL,
                    type: "POST",
                    data : data,
                    success: function(response){
                        $('#result_wraper').empty();
                        var result = JSON.parse(response);									//parsira JSON rezultat			
                    	var table = $('<table></table>').attr('id', 'result_table');		//crta tabelu sa rezultatima
                    	table.append('<thead><th>Result: </th></thead>')	
         				for (var i = 0 ; i < result.length ; i++) {
         					table.append('<tr><td>' +  result[i] + '</td></tr>');
         					$('#result_wraper').append(table);
         				};
                    }
            });
        e.preventDefault();  																//omogucava ostanak na istoj strani
        });
    </script>
    </body>
</html>
